<div class="preview-page">
  @if (menuStore.loading()) {
    <div class="loading">
      <mat-icon>hourglass_empty</mat-icon>
      {{ 'common.loading' | translate }}
    </div>
  }

  @if (menuStore.error()) {
    <div class="error-card">
      <mat-icon color="warn">error</mat-icon>
      <span>{{ menuStore.error() }}</span>
    </div>
  }

  @if (menuStore.selectedMenu(); as menu) {
    <!-- Hero Header -->
    <div class="preview-header">
      <div class="header-content">
        <h1 class="cafe-name">{{ menu.name }}</h1>
        @if (menu.sections.length > 0) {
          <p class="header-subtitle">
            @if (menu.sections[0]) {
              {{ menu.sections[0].name }}
              @if (menu.sections[0].availableFrom && menu.sections[0].availableTo) {
                <span> â€¢ {{ menu.sections[0].availableFrom }} - {{ menu.sections[0].availableTo }}</span>
              }
            }
          </p>
        }
        <button class="back-to-edit-btn" (click)="onEdit()">
          Back to Edit
        </button>
      </div>
    </div>

    <!-- Menu Content -->
    <div class="preview-content">
      @for (section of menu.sections; track section.id || $index) {
        <section class="menu-section">
          <h2 class="section-title">{{ section.name }}</h2>

          <div class="items-list">
            @for (item of section.items; track item.id || $index) {
              <div class="menu-item">
                <div class="item-content">
                  <h3 class="item-name">{{ item.name }}</h3>
                  @if (item.description) {
                    <p class="item-description">{{ item.description }}</p>
                  }
                  <div class="item-price">
                    @if (item.price.discount > 0) {
                      <span class="discounted-price">{{ getFormattedPrice(item.price) }}</span>
                    } @else {
                      <span class="price">{{ getFormattedPrice(item.price) }}</span>
                    }
                  </div>
                </div>
                <div class="item-image">
                  <!-- Image placeholder -->
                </div>
              </div>
            }
          </div>
        </section>
      }
    </div>
  }
</div>
